<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Qpid::Proton::Messenger::Messenger
  
    &mdash; Documentation by YARD 0.9.8
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Qpid::Proton::Messenger::Messenger";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (M)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Qpid.html" title="Qpid (module)">Qpid</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Proton.html" title="Qpid::Proton (module)">Proton</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Messenger.html" title="Qpid::Proton::Messenger (module)">Messenger</a></span></span>
     &raquo; 
    <span class="title">Messenger</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Qpid::Proton::Messenger::Messenger
  
  <span class="deprecated note title">Deprecated</span>
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Qpid::Proton::Messenger::Messenger</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/messenger/messenger.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'>
<p>use <span class='object_link'><a href="../Container.html" title="Qpid::Proton::Container (class)">Container</a></span></p>
</div></div>

<p>The <code>Messenger</code> class defines a high level interface for sending
and receiving Messages. Every Messenger contains a single logical queue of
incoming messages and a single logical queue of outgoing messages. These
messages in these queues may be destined for, or originate from, a variety
of addresses.</p>

<p>The messenger interface is single-threaded.  All methods except one (
#interrupt ) are intended to be used from within the messenger thread.</p>

<h3 id="label-Sending+-26+Receiving+Messages">Sending &amp; Receiving Messages</h3>

<p>The Messenger class works in conjuction with the Message class. The Message
class is a mutable holder of message content.</p>

<p>The put method copies its Message to the outgoing queue, and may send
queued messages if it can do so without blocking.  The send method blocks
until it has sent the requested number of  or until a timeout interrupts
the attempt.</p>

<p>Similarly, the recv method receives messages into the incoming queue, and
may block as it attempts to receive the requested number of messages,  or
until timeout is reached. It may receive fewer than the requested number. 
The get method pops the eldest Message off the incoming queue and copies it
into the Message object that you supply.  It will not block.</p>

<p>The blocking attribute allows you to turn off blocking behavior entirely,
in which case send and recv will do whatever they can without blocking, and
then return.  You can then look at the number of incoming and outgoing
messages to see how much outstanding work still remains.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#finalize!-class_method" title="finalize! (class method)">.<strong>finalize!</strong>(impl)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#accept-instance_method" title="#accept (instance method)">#<strong>accept</strong>(tracker = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Signal the sender that you have acted on the Message pointed to by the
tracker.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#blocking=-instance_method" title="#blocking= (instance method)">#<strong>blocking=</strong>(blocking)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the blocking mode.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#blocking%3F-instance_method" title="#blocking? (instance method)">#<strong>blocking?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if blocking mode is enabled.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#certificate-instance_method" title="#certificate (instance method)">#<strong>certificate</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the path to a certificate file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#certificate=-instance_method" title="#certificate= (instance method)">#<strong>certificate=</strong>(certificate)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Path to a certificate file for the <code>Messenger</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_error-instance_method" title="#clear_error (instance method)">#<strong>clear_error</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clears the current error state.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#deadline-instance_method" title="#deadline (instance method)">#<strong>deadline</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#errno-instance_method" title="#errno (instance method)">#<strong>errno</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the most recent error number.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#error-instance_method" title="#error (instance method)">#<strong>error</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the most recent error message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#error%3F-instance_method" title="#error? (instance method)">#<strong>error?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Reports whether an error occurred.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get-instance_method" title="#get (instance method)">#<strong>get</strong>(msg = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Moves the message from the head of the incoming message queue into the
supplied message object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#incoming-instance_method" title="#incoming (instance method)">#<strong>incoming</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the number of messages in the incoming queue that have not been
retrieved.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#incoming_tracker-instance_method" title="#incoming_tracker (instance method)">#<strong>incoming_tracker</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a <code>Tracker</code> for the most recently received message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#incoming_window-instance_method" title="#incoming_window (instance method)">#<strong>incoming_window</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the incoming window.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#incoming_window=-instance_method" title="#incoming_window= (instance method)">#<strong>incoming_window=</strong>(window)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the incoming window.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(name = nil)  &#x21d2; Messenger </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new <code>Messenger</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#interrupt-instance_method" title="#interrupt (instance method)">#<strong>interrupt</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Attempts interrupting of the messenger thread.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">#<strong>name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#outgoing-instance_method" title="#outgoing (instance method)">#<strong>outgoing</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the number messages in the outgoing queue that have not been
transmitted.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#outgoing_tracker-instance_method" title="#outgoing_tracker (instance method)">#<strong>outgoing_tracker</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a <code>Tracker</code> for the message most recently sent via the
put method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#outgoing_window-instance_method" title="#outgoing_window (instance method)">#<strong>outgoing_window</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the outgoing window.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#outgoing_window=-instance_method" title="#outgoing_window= (instance method)">#<strong>outgoing_window=</strong>(window)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the outgoing window.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#passive=-instance_method" title="#passive= (instance method)">#<strong>passive=</strong>(mode)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Turns passive mode on or off.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#passive%3F-instance_method" title="#passive? (instance method)">#<strong>passive?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if passive mode is enabled.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#password-instance_method" title="#password (instance method)">#<strong>password</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the password property for the Messenger.private_key file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#password=-instance_method" title="#password= (instance method)">#<strong>password=</strong>(password)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This property contains the password for the Messenger.private_key file, or
<code>nil</code> if the file is not encrypted.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#private_key-instance_method" title="#private_key (instance method)">#<strong>private_key</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the path to a private key file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#private_key=-instance_method" title="#private_key= (instance method)">#<strong>private_key=</strong>(key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Path to a private key file for the <code>Messenger</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#put-instance_method" title="#put (instance method)">#<strong>put</strong>(message)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Places the content contained in the message onto the outgoing queue of the
Messenger.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#receive-instance_method" title="#receive (instance method)">#<strong>receive</strong>(limit = -1))  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Receives up to limit messages into the incoming queue.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#receiving%3F-instance_method" title="#receiving? (instance method)">#<strong>receiving?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if the messenger is currently receiving data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reject-instance_method" title="#reject (instance method)">#<strong>reject</strong>(tracker)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Rejects the incoming message identified by the tracker.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rewrite-instance_method" title="#rewrite (instance method)">#<strong>rewrite</strong>(pattern, address)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Similar to #route, except that the destination of the Message is determined
before the message address is rewritten.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#route-instance_method" title="#route (instance method)">#<strong>route</strong>(pattern, address)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Adds a routing rule to the Messenger&#39;s internal routing table.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#selectable-instance_method" title="#selectable (instance method)">#<strong>selectable</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send-instance_method" title="#send (instance method)">#<strong>send</strong>(n = -1))  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This call will block until the indicated number of messages have been sent,
or until the operation times out.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#settle-instance_method" title="#settle (instance method)">#<strong>settle</strong>(tracker)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Frees a Messenger from tracking the status associated with a given tracker.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start-instance_method" title="#start (instance method)">#<strong>start</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>For future compatibility, do not send or recv messages before starting the
<code>Messenger</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status-instance_method" title="#status (instance method)">#<strong>status</strong>(tracker)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Gets the last known remote state of the delivery associated with the given
tracker, as long as the Message is still within your outgoing window.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop-instance_method" title="#stop (instance method)">#<strong>stop</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Stops the <code>Messenger</code>, preventing it from sending or receiving
any more messages.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stopped%3F-instance_method" title="#stopped? (instance method)">#<strong>stopped?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if a Messenger is in the stopped state.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#subscribe-instance_method" title="#subscribe (instance method)">#<strong>subscribe</strong>(address, timeout = 0)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Subscribes the Messenger to messages originating from the specified source.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#timeout-instance_method" title="#timeout (instance method)">#<strong>timeout</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the timeout period.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#timeout=-instance_method" title="#timeout= (instance method)">#<strong>timeout=</strong>(timeout)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the timeout period, in milliseconds.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trusted_certificates-instance_method" title="#trusted_certificates (instance method)">#<strong>trusted_certificates</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The path to the databse of trusted certificates.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trusted_certificates=-instance_method" title="#trusted_certificates= (instance method)">#<strong>trusted_certificates=</strong>(certificates)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A path to a database of trusted certificates for use in verifying the peer
on an SSL/TLS connection.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unregister_selectable-instance_method" title="#unregister_selectable (instance method)">#<strong>unregister_selectable</strong>(fileno)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Unregisters a selectable object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#work-instance_method" title="#work (instance method)">#<strong>work</strong>(timeout = -1))  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends or receives any outstanding messages queued for a Messenger.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(name = nil)  &#x21d2; <tt><span class='object_link'><a href="" title="Qpid::Proton::Messenger::Messenger (class)">Messenger</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new <code>Messenger</code>.</p>

<p>The <code>name</code> parameter is optional. If one is not provided then a
unique name is generated.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p>name - the name (def. nil)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


74
75
76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 74</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../../../Qpid.html" title="Qpid (module)">Qpid</a></span></span><span class='period'>.</span><span class='id identifier rubyid_deprecated'>deprecated</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Qpid::Proton::Messenger</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Qpid::Proton::Container</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@impl</span> <span class='op'>=</span> <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger'>pn_messenger</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='ivar'>@selectables</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'>ObjectSpace</span><span class='period'>.</span><span class='id identifier rubyid_define_finalizer'>define_finalizer</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_finalize!'>finalize!</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="finalize!-class_method">
  
    .<strong>finalize!</strong>(impl)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


81
82
83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 81</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_finalize!'>finalize!</span><span class='lparen'>(</span><span class='id identifier rubyid_impl'>impl</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span>
    <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_free'>pn_messenger_free</span><span class='lparen'>(</span><span class='id identifier rubyid_impl'>impl</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="accept-instance_method">
  
    #<strong>accept</strong>(tracker = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Signal the sender that you have acted on the Message pointed to by the
tracker.  If no tracker is supplied, then all messages that have been
returned by the get method are accepted, except those that have already
been auto-settled by passing beyond your incoming window size.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p>tracker - the tracker</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>TypeError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


569
570
571
572
573
574
575
576
577
578</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 569</span>

<span class='kw'>def</span> <span class='id identifier rubyid_accept'>accept</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker'>tracker</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid tracker: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tracker'>tracker</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>or</span> <span class='id identifier rubyid_valid_tracker?'>valid_tracker?</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker'>tracker</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_tracker'>tracker</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_incoming_tracker'>incoming_tracker</span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='op'>=</span> <span class='const'>Cproton</span><span class='op'>::</span><span class='const'>PN_CUMULATIVE</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>end</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_accept'>pn_messenger_accept</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_impl'>impl</span><span class='comma'>,</span> <span class='id identifier rubyid_flag'>flag</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="blocking=-instance_method">
  
    #<strong>blocking=</strong>(blocking)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the blocking mode.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


140
141
142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 140</span>

<span class='kw'>def</span> <span class='id identifier rubyid_blocking='>blocking=</span><span class='lparen'>(</span><span class='id identifier rubyid_blocking'>blocking</span><span class='rparen'>)</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_set_blocking'>pn_messenger_set_blocking</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_blocking'>blocking</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="blocking?-instance_method">
  
    #<strong>blocking?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if blocking mode is enabled.</p>

<p>Enable or disable blocking behavior during message sending and receiving. 
This affects every blocking call, with the exception of work().  Currently,
the affected calls are send, recv, and stop.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_blocking?'>blocking?</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_is_blocking'>pn_messenger_is_blocking</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="certificate-instance_method">
  
    #<strong>certificate</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the path to a certificate file.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 258</span>

<span class='kw'>def</span> <span class='id identifier rubyid_certificate'>certificate</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_get_certificate'>pn_messenger_get_certificate</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="certificate=-instance_method">
  
    #<strong>certificate=</strong>(certificate)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Path to a certificate file for the <code>Messenger</code>.</p>

<p>This certificate is used when the <code>Messenger</code> accepts or
establishes SSL/TLS connections.  This property must be specified for the
Messenger to accept incoming SSL/TLS connections and to establish client
authenticated outgoing SSL/TLS connection.  Non client authenticated
outgoing SSL/TLS connections do not require this property.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p>certificate - the certificate</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


252
253
254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 252</span>

<span class='kw'>def</span> <span class='id identifier rubyid_certificate='>certificate=</span><span class='lparen'>(</span><span class='id identifier rubyid_certificate'>certificate</span><span class='rparen'>)</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_set_certificate'>pn_messenger_set_certificate</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_certificate'>certificate</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear_error-instance_method">
  
    #<strong>clear_error</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Clears the current error state.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


188
189
190
191
192
193</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 188</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_error'>clear_error</span>
  <span class='id identifier rubyid_error'>error</span> <span class='op'>=</span> <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_error'>pn_messenger_error</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_error'>error</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_error_clear'>pn_error_clear</span><span class='lparen'>(</span><span class='id identifier rubyid_error'>error</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deadline-instance_method">
  
    #<strong>deadline</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165
166</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 163</span>

<span class='kw'>def</span> <span class='id identifier rubyid_deadline'>deadline</span>
  <span class='id identifier rubyid_tstamp'>tstamp</span> <span class='op'>=</span> <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_deadline'>pn_messenger_deadline</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_tstamp'>tstamp</span> <span class='op'>/</span> <span class='float'>1000.0</span> <span class='kw'>unless</span> <span class='id identifier rubyid_tstamp'>tstamp</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="errno-instance_method">
  
    #<strong>errno</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the most recent error number.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 176</span>

<span class='kw'>def</span> <span class='id identifier rubyid_errno'>errno</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_errno'>pn_messenger_errno</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="error-instance_method">
  
    #<strong>error</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the most recent error message.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


182
183
184</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 182</span>

<span class='kw'>def</span> <span class='id identifier rubyid_error'>error</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_error_text'>pn_error_text</span><span class='lparen'>(</span><span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_error'>pn_messenger_error</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="error?-instance_method">
  
    #<strong>error?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Reports whether an error occurred.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


170
171
172</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 170</span>

<span class='kw'>def</span> <span class='id identifier rubyid_error?'>error?</span>
  <span class='op'>!</span><span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_errno'>pn_messenger_errno</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_zero?'>zero?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get-instance_method">
  
    #<strong>get</strong>(msg = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Moves the message from the head of the incoming message queue into the
supplied message object. Any content in the supplied message will be
overwritten. A tracker for the incoming Message is returned.  The tracker
can later be used to communicate your acceptance or rejection of the
Message.</p>

<p>If no message is provided in the argument, then one is created. In either
case, the one returned will be the fetched message.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p>msg - the (optional) <code>Message</code> instance to be used</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


361
362
363
364
365
366
367
368
369
370
371</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 361</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_msg_impl'>msg_impl</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_msg'>msg</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_msg_impl'>msg_impl</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_msg_impl'>msg_impl</span> <span class='op'>=</span> <span class='id identifier rubyid_msg'>msg</span><span class='period'>.</span><span class='id identifier rubyid_impl'>impl</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_perform_get'>perform_get</span><span class='lparen'>(</span><span class='id identifier rubyid_msg_impl'>msg_impl</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_msg'>msg</span><span class='period'>.</span><span class='id identifier rubyid_post_decode'>post_decode</span> <span class='kw'>unless</span> <span class='id identifier rubyid_msg'>msg</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_incoming_tracker'>incoming_tracker</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="incoming-instance_method">
  
    #<strong>incoming</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the number of messages in the incoming queue that have not been
retrieved.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


442
443
444</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 442</span>

<span class='kw'>def</span> <span class='id identifier rubyid_incoming'>incoming</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_incoming'>pn_messenger_incoming</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="incoming_tracker-instance_method">
  
    #<strong>incoming_tracker</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a <code>Tracker</code> for the most recently received message.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


553
554
555
556
557</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 553</span>

<span class='kw'>def</span> <span class='id identifier rubyid_incoming_tracker'>incoming_tracker</span>
  <span class='id identifier rubyid_impl'>impl</span> <span class='op'>=</span> <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_incoming_tracker'>pn_messenger_incoming_tracker</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_impl'>impl</span> <span class='op'>==</span> <span class='op'>-</span><span class='int'>1</span>
  <span class='const'><span class='object_link'><a href="Tracker.html" title="Qpid::Proton::Messenger::Tracker (class)">Tracker</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Tracker.html#initialize-instance_method" title="Qpid::Proton::Messenger::Tracker#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_impl'>impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="incoming_window-instance_method">
  
    #<strong>incoming_window</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the incoming window.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


658
659
660</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 658</span>

<span class='kw'>def</span> <span class='id identifier rubyid_incoming_window'>incoming_window</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_get_incoming_window'>pn_messenger_get_incoming_window</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="incoming_window=-instance_method">
  
    #<strong>incoming_window=</strong>(window)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the incoming window.</p>

<p>The Messenger will track the remote status of this many incoming deliveries
after they have been accepted or rejected.</p>

<p>Messages enter this window only when you take them into your application
using get().  If your incoming window size is n, and you get n+1 messages
without explicitly accepting or rejecting the oldest message, then the
message that passes beyond the edge of the incoming window will be assigned
the default disposition of its link.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p>window - the window size</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>TypeError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


651
652
653
654</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 651</span>

<span class='kw'>def</span> <span class='id identifier rubyid_incoming_window='>incoming_window=</span><span class='lparen'>(</span><span class='id identifier rubyid_window'>window</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid window: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_window'>window</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_valid_window?'>valid_window?</span><span class='lparen'>(</span><span class='id identifier rubyid_window'>window</span><span class='rparen'>)</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_set_incoming_window'>pn_messenger_set_incoming_window</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_window'>window</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="interrupt-instance_method">
  
    #<strong>interrupt</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Attempts interrupting of the messenger thread.</p>

<p>The Messenger interface is single-threaded, and this is the only function
intended to be called from outside of is thread.</p>

<p>Call this from a non-Messenger thread to interrupt it while it is blocking.
This will cause a ::InterruptError to be raised.</p>

<p>If there is no currently blocking call, then the next blocking call will be
affected, even if it is within the same thread that originated the
interrupt.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


412
413
414</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 412</span>

<span class='kw'>def</span> <span class='id identifier rubyid_interrupt'>interrupt</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_interrupt'>pn_messenger_interrupt</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    #<strong>name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the name.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 89</span>

<span class='kw'>def</span> <span class='id identifier rubyid_name'>name</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_name'>pn_messenger_name</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="outgoing-instance_method">
  
    #<strong>outgoing</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the number messages in the outgoing queue that have not been
transmitted.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


435
436
437</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 435</span>

<span class='kw'>def</span> <span class='id identifier rubyid_outgoing'>outgoing</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_outgoing'>pn_messenger_outgoing</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="outgoing_tracker-instance_method">
  
    #<strong>outgoing_tracker</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a <code>Tracker</code> for the message most recently sent via the
put method.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


545
546
547
548
549</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 545</span>

<span class='kw'>def</span> <span class='id identifier rubyid_outgoing_tracker'>outgoing_tracker</span>
  <span class='id identifier rubyid_impl'>impl</span> <span class='op'>=</span> <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_outgoing_tracker'>pn_messenger_outgoing_tracker</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_impl'>impl</span> <span class='op'>==</span> <span class='op'>-</span><span class='int'>1</span>
  <span class='const'><span class='object_link'><a href="Tracker.html" title="Qpid::Proton::Messenger::Tracker (class)">Tracker</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Tracker.html#initialize-instance_method" title="Qpid::Proton::Messenger::Tracker#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_impl'>impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="outgoing_window-instance_method">
  
    #<strong>outgoing_window</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the outgoing window.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


682
683
684</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 682</span>

<span class='kw'>def</span> <span class='id identifier rubyid_outgoing_window'>outgoing_window</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_get_outgoing_window'>pn_messenger_get_outgoing_window</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="outgoing_window=-instance_method">
  
    #<strong>outgoing_window=</strong>(window)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the outgoing window.</p>

<p>The Messenger will track the remote status of this many outgoing deliveries
after calling send. A Message enters this window when you call the put()
method with the message.  If your outgoing window size is n, and you call
put n+1 times, status information will no longer be available for the first
message.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p>window - the window size</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>TypeError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


675
676
677
678</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 675</span>

<span class='kw'>def</span> <span class='id identifier rubyid_outgoing_window='>outgoing_window=</span><span class='lparen'>(</span><span class='id identifier rubyid_window'>window</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid window: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_window'>window</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_valid_window?'>valid_window?</span><span class='lparen'>(</span><span class='id identifier rubyid_window'>window</span><span class='rparen'>)</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_set_outgoing_window'>pn_messenger_set_outgoing_window</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_window'>window</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="passive=-instance_method">
  
    #<strong>passive=</strong>(mode)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Turns passive mode on or off.</p>

<p>When set to passive mode, Messenger will not attempt to perform I/O
operations internally. In this mode it is necesssary to use the Selectable
type to drive any I/O needed to perform requestioned actions.</p>

<p>In this mode Messenger will never block.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 159</span>

<span class='kw'>def</span> <span class='id identifier rubyid_passive='>passive=</span><span class='lparen'>(</span><span class='id identifier rubyid_mode'>mode</span><span class='rparen'>)</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_set_passive'>pn_messenger_set_passive</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_mode'>mode</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="passive?-instance_method">
  
    #<strong>passive?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if passive mode is enabled.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


146
147
148</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 146</span>

<span class='kw'>def</span> <span class='id identifier rubyid_passive?'>passive?</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_is_passive'>pn_messenger_is_passive</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="password-instance_method">
  
    #<strong>password</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the password property for the Messenger.private_key file.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 106</span>

<span class='kw'>def</span> <span class='id identifier rubyid_password'>password</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_get_password'>pn_messenger_get_password</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="password=-instance_method">
  
    #<strong>password=</strong>(password)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This property contains the password for the Messenger.private_key file, or
<code>nil</code> if the file is not encrypted.</p>

<h4 id="label-Arguments">Arguments</h4>
<ul><li>
<p>password - the password</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 100</span>

<span class='kw'>def</span> <span class='id identifier rubyid_password='>password=</span><span class='lparen'>(</span><span class='id identifier rubyid_password'>password</span><span class='rparen'>)</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_set_password'>pn_messenger_set_password</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="private_key-instance_method">
  
    #<strong>private_key</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the path to a private key file.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


279
280
281</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 279</span>

<span class='kw'>def</span> <span class='id identifier rubyid_private_key'>private_key</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_get_private_key'>pn_messenger_get_private_key</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="private_key=-instance_method">
  
    #<strong>private_key=</strong>(key)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Path to a private key file for the <code>Messenger</code>.</p>

<p>The property must be specified for the <code>Messenger</code> to accept
incoming SSL/TLS connections and to establish client authenticated outgoing
SSL/TLS connections.  Non client authenticated SSL/TLS connections do not
require this property.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p>key - the key file</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


273
274
275</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 273</span>

<span class='kw'>def</span> <span class='id identifier rubyid_private_key='>private_key=</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_set_private_key'>pn_messenger_set_private_key</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="put-instance_method">
  
    #<strong>put</strong>(message)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Places the content contained in the message onto the outgoing queue of the
Messenger.</p>

<p>This method will never block, however it will send any unblocked Messages
in the outgoing queue immediately and leave any blocked Messages remaining
in the outgoing queue. The send call may then be used to block until the
outgoing queue is empty.  The outgoing attribute may be used to check the
depth of the outgoing queue.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p>message - the message</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


315
316
317
318
319
320
321
322
323
324
325
326</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 315</span>

<span class='kw'>def</span> <span class='id identifier rubyid_put'>put</span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid message: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../../Qpid.html" title="Qpid (module)">Qpid</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Proton.html" title="Qpid::Proton (module)">Proton</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Message.html" title="Qpid::Proton::Message (class)">Message</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='op'>::</span><span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid message type: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='comment'># encode the message first
</span>  <span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_pre_encode'>pre_encode</span>
  <span class='id identifier rubyid_perform_put'>perform_put</span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_outgoing_tracker'>outgoing_tracker</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="receive-instance_method">
  
    #<strong>receive</strong>(limit = -1))  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Receives up to limit messages into the incoming queue.  If no value for
limit is supplied, this call will receive as many messages as it can buffer
internally.  If the Messenger is in blocking mode, this call will block
until at least one Message is available in the incoming queue.</p>

<p>Options ====</p>
<ul><li>
<p>limit - the maximum number of messages to receive</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


391
392
393</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 391</span>

<span class='kw'>def</span> <span class='id identifier rubyid_receive'>receive</span><span class='lparen'>(</span><span class='id identifier rubyid_limit'>limit</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_recv'>pn_messenger_recv</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_limit'>limit</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="receiving?-instance_method">
  
    #<strong>receiving?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if the messenger is currently receiving data.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


396
397
398</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 396</span>

<span class='kw'>def</span> <span class='id identifier rubyid_receiving?'>receiving?</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_receiving'>pn_messenger_receiving</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reject-instance_method">
  
    #<strong>reject</strong>(tracker)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Rejects the incoming message identified by the tracker. If no tracker is
supplied, all messages that have been returned by the get method are
rejected, except those that have already been auto-settled by passing
beyond your outgoing window size.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p>tracker - the tracker</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>TypeError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


589
590
591
592
593
594
595
596
597
598</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 589</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reject'>reject</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker'>tracker</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid tracker: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tracker'>tracker</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>or</span> <span class='id identifier rubyid_valid_tracker?'>valid_tracker?</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker'>tracker</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_tracker'>tracker</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_incoming_tracker'>incoming_tracker</span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='op'>=</span> <span class='const'>Cproton</span><span class='op'>::</span><span class='const'>PN_CUMULATIVE</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>end</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_reject'>pn_messenger_reject</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_impl'>impl</span><span class='comma'>,</span> <span class='id identifier rubyid_flag'>flag</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rewrite-instance_method">
  
    #<strong>rewrite</strong>(pattern, address)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Similar to #route, except that the destination of the Message is determined
before the message address is rewritten.</p>

<p>The outgoing address is only rewritten after routing has been finalized. 
If a message has an outgoing address of “amqp://0.0.0.0:5678”, and a
rewriting rule that changes its outgoing address to “foo”, it will still
arrive at the peer that is listening on “amqp://0.0.0.0:5678”, but when it
arrives there, the receiver will see its outgoing address as “foo”.</p>

<p>The default rewrite rule removes username and password from addresses
before they are transmitted.</p>

<h4 id="label-Arguments">Arguments</h4>
<ul><li>
<p>pattern - the outgoing address</p>
</li><li>
<p>address - the target address</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


522
523
524</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 522</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rewrite'>rewrite</span><span class='lparen'>(</span><span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_address'>address</span><span class='rparen'>)</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_rewrite'>pn_messenger_rewrite</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_address'>address</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="route-instance_method">
  
    #<strong>route</strong>(pattern, address)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Adds a routing rule to the Messenger&#39;s internal routing table.</p>

<p>The route procedure may be used to influence how a Messenger will
internally treat a given address or class of addresses. Every call to the
route procedure will result in Messenger appending a routing rule to its
internal routing table.</p>

<p>Whenever a Message is presented to a Messenger for delivery, it will match
the address of this message against the set of routing rules in order. The
first rule to match will be triggered, and instead of routing based on the
address presented in the message, the Messenger will route based on the
address supplied in the rule.</p>

<p>The pattern matching syntax supports two types of matches, a &#39;%&#39;
will match any character except a &#39;/&#39;, and a &#39;*&#39; will match
any character including a &#39;/&#39;.</p>

<p>A routing address is specified as a normal AMQP address, however it may
additionally use substitution variables from the pattern match that
triggered the rule.</p>

<h4 id="label-Arguments">Arguments</h4>
<ul><li>
<p>pattern - the address pattern</p>
</li><li>
<p>address - the target address</p>
</li></ul>

<h4 id="label-Examples">Examples</h4>

<pre class="code ruby"><code class="ruby"><span class='comment'># route messages sent to foo to the destionaty amqp://foo.com
</span><span class='id identifier rubyid_messenger'>messenger</span><span class='period'>.</span><span class='id identifier rubyid_route'>route</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>amqp://foo.com</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># any message to foobar will be routed to amqp://foo.com/bar
</span><span class='id identifier rubyid_messenger'>messenger</span><span class='period'>.</span><span class='id identifier rubyid_route'>route</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foobar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>amqp://foo.com/bar</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># any message to bar/&lt;path&gt; will be routed to the same path within
</span><span class='comment'># the amqp://bar.com domain
</span><span class='id identifier rubyid_messenger'>messenger</span><span class='period'>.</span><span class='id identifier rubyid_route'>route</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar/*</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>amqp://bar.com/$1</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># route all Message objects over TLS
</span><span class='id identifier rubyid_messenger'>messenger</span><span class='period'>.</span><span class='id identifier rubyid_route'>route</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>amqp:*</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>amqps:$1</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># supply credentials for foo
</span><span class='id identifier rubyid_messenger'>messenger</span><span class='period'>.</span><span class='id identifier rubyid_route'>route</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>amqp://foo.com/*</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>amqp://user:password@foo.com/$1</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># supply credentials for all domains
</span><span class='id identifier rubyid_messenger'>messenger</span><span class='period'>.</span><span class='id identifier rubyid_route'>route</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>amqp://*</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>amqp://user:password@$1</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># route all addresses through a single proxy while preserving the
</span><span class='comment'># original destination
</span><span class='id identifier rubyid_messenger'>messenger</span><span class='period'>.</span><span class='id identifier rubyid_route'>route</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>amqp://%$/*</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>amqp://user:password@proxy/$1/$2</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># route any address through a single broker
</span><span class='id identifier rubyid_messenger'>messenger</span><span class='period'>.</span><span class='id identifier rubyid_route'>route</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>amqp://user:password@broker/$1</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


500
501
502</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 500</span>

<span class='kw'>def</span> <span class='id identifier rubyid_route'>route</span><span class='lparen'>(</span><span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_address'>address</span><span class='rparen'>)</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_route'>pn_messenger_route</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_pattern'>pattern</span><span class='comma'>,</span> <span class='id identifier rubyid_address'>address</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="selectable-instance_method">
  
    #<strong>selectable</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


526
527
528
529
530
531
532
533
534
535
536
537
538
539
540</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 526</span>

<span class='kw'>def</span> <span class='id identifier rubyid_selectable'>selectable</span>
  <span class='id identifier rubyid_impl'>impl</span> <span class='op'>=</span> <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_selectable'>pn_messenger_selectable</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>

  <span class='comment'># if we don&#39;t have any selectables, then return
</span>  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_impl'>impl</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_fd'>fd</span> <span class='op'>=</span> <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_selectable_get_fd'>pn_selectable_get_fd</span><span class='lparen'>(</span><span class='id identifier rubyid_impl'>impl</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_selectable'>selectable</span> <span class='op'>=</span> <span class='ivar'>@selectables</span><span class='lbracket'>[</span><span class='id identifier rubyid_fd'>fd</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_selectable'>selectable</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_selectable'>selectable</span> <span class='op'>=</span> <span class='const'>Selectable</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_impl'>impl</span><span class='rparen'>)</span>
    <span class='ivar'>@selectables</span><span class='lbracket'>[</span><span class='id identifier rubyid_fd'>fd</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_selectable'>selectable</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_selectable'>selectable</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="send-instance_method">
  
    #<strong>send</strong>(n = -1))  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This call will block until the indicated number of messages have been sent,
or until the operation times out. If n is -1 this call will block until all
outgoing messages have been sent. If n is 0 then this call will send
whatever it can without blocking.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


343
344
345</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 343</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_n'>n</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_send'>pn_messenger_send</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_n'>n</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="settle-instance_method">
  
    #<strong>settle</strong>(tracker)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Frees a Messenger from tracking the status associated with a given tracker.
If you don&#39;t supply a tracker, all outgoing messages up to the most
recent will be settled.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p>tracker - the tracker</p>
</li></ul>

<h4 id="label-Examples">Examples</h4>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>TypeError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


625
626
627
628
629
630
631
632
633
634</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 625</span>

<span class='kw'>def</span> <span class='id identifier rubyid_settle'>settle</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker'>tracker</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid tracker: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tracker'>tracker</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_valid_tracker?'>valid_tracker?</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker'>tracker</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_tracker'>tracker</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_incoming_tracker'>incoming_tracker</span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='op'>=</span> <span class='const'>Cproton</span><span class='op'>::</span><span class='const'>PN_CUMULATIVE</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_flag'>flag</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>end</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_settle'>pn_messenger_settle</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_impl'>impl</span><span class='comma'>,</span> <span class='id identifier rubyid_flag'>flag</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start-instance_method">
  
    #<strong>start</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>For future compatibility, do not send or recv messages before starting the
<code>Messenger</code>.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


198
199
200
201</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 198</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start'>start</span>
  <span class='id identifier rubyid_at_exit'>at_exit</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_stop'>stop</span> <span class='rbrace'>}</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_start'>pn_messenger_start</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="status-instance_method">
  
    #<strong>status</strong>(tracker)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Gets the last known remote state of the delivery associated with the given
tracker, as long as the Message is still within your outgoing window. (Also
works on incoming messages that are still within your incoming queue. See
TrackerStatus for details on the values returned.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p>tracker - the tracker</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>TypeError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


610
611
612
613</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 610</span>

<span class='kw'>def</span> <span class='id identifier rubyid_status'>status</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker'>tracker</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid tracker: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tracker'>tracker</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_valid_tracker?'>valid_tracker?</span><span class='lparen'>(</span><span class='id identifier rubyid_tracker'>tracker</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="TrackerStatus.html" title="Qpid::Proton::Messenger::TrackerStatus (class)">TrackerStatus</a></span></span><span class='period'>.</span><span class='id identifier rubyid_by_value'><span class='object_link'><a href="TrackerStatus.html#by_value-class_method" title="Qpid::Proton::Messenger::TrackerStatus.by_value (method)">by_value</a></span></span><span class='lparen'>(</span><span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_status'>pn_messenger_status</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_tracker'>tracker</span><span class='period'>.</span><span class='id identifier rubyid_impl'>impl</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stop-instance_method">
  
    #<strong>stop</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Stops the <code>Messenger</code>, preventing it from sending or receiving
any more messages.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


206
207
208</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 206</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stop'>stop</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_stop'>pn_messenger_stop</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stopped?-instance_method">
  
    #<strong>stopped?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if a Messenger is in the stopped state. This function does not
block.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


213
214
215</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 213</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stopped?'>stopped?</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_stopped'>pn_messenger_stopped</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="subscribe-instance_method">
  
    #<strong>subscribe</strong>(address, timeout = 0)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Subscribes the Messenger to messages originating from the specified source.
The source is an address as specified in the Messenger introduction with
the following addition. If the domain portion of the address begins with
the &#39;~&#39; character, the Messenger will interpret the domain as
host/port, bind to it, and listen for incoming messages. For example
“~0.0.0.0”, “amqp://~0.0.0.0” will all bind to any local interface and
listen for incoming messages.  An address of “amqps://~0.0.0.0” will only
permit incoming SSL connections.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p>address - the source address to be subscribe</p>
</li><li>
<p>timeout - an optional time-to-live value, in seconds, for the</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_subscription'>subscription</span>
</code></pre>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>TypeError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


233
234
235
236
237
238</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 233</span>

<span class='kw'>def</span> <span class='id identifier rubyid_subscribe'>subscribe</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_timeout'>timeout</span><span class='op'>=</span><span class='int'>0</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid address: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_address'>address</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_address'>address</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_subscription'>subscription</span> <span class='op'>=</span> <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_subscribe_ttl'>pn_messenger_subscribe_ttl</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='id identifier rubyid_timeout'>timeout</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="../../../Qpid.html" title="Qpid (module)">Qpid</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Proton.html" title="Qpid::Proton (module)">Proton</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../ProtonError.html" title="Qpid::Proton::ProtonError (class)">ProtonError</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Subscribe failed</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_subscription'>subscription</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='const'><span class='object_link'><a href="Subscription.html" title="Qpid::Proton::Messenger::Subscription (class)">Subscription</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Subscription.html#initialize-instance_method" title="Qpid::Proton::Messenger::Subscription#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_subscription'>subscription</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="timeout-instance_method">
  
    #<strong>timeout</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the timeout period</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 125</span>

<span class='kw'>def</span> <span class='id identifier rubyid_timeout'>timeout</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_get_timeout'>pn_messenger_get_timeout</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="timeout=-instance_method">
  
    #<strong>timeout=</strong>(timeout)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the timeout period, in milliseconds.</p>

<p>A negative timeout period implies an infinite timeout.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p>timeout - the timeout period</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>TypeError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


118
119
120
121</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 118</span>

<span class='kw'>def</span> <span class='id identifier rubyid_timeout='>timeout=</span><span class='lparen'>(</span><span class='id identifier rubyid_timeout'>timeout</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid timeout: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_timeout'>timeout</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_timeout'>timeout</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_set_timeout'>pn_messenger_set_timeout</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_timeout'>timeout</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="trusted_certificates-instance_method">
  
    #<strong>trusted_certificates</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The path to the databse of trusted certificates.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


297
298
299</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 297</span>

<span class='kw'>def</span> <span class='id identifier rubyid_trusted_certificates'>trusted_certificates</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_get_trusted_certificates'>pn_messenger_get_trusted_certificates</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="trusted_certificates=-instance_method">
  
    #<strong>trusted_certificates=</strong>(certificates)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>A path to a database of trusted certificates for use in verifying the peer
on an SSL/TLS connection. If this property is <code>nil</code>, then the
peer will not be verified.</p>

<h4 id="label-Options">Options</h4>
<ul><li>
<p>certificates - the certificates path</p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


291
292
293</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 291</span>

<span class='kw'>def</span> <span class='id identifier rubyid_trusted_certificates='>trusted_certificates=</span><span class='lparen'>(</span><span class='id identifier rubyid_certificates'>certificates</span><span class='rparen'>)</span>
  <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_set_trusted_certificates'>pn_messenger_set_trusted_certificates</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span><span class='id identifier rubyid_certificates'>certificates</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unregister_selectable-instance_method">
  
    #<strong>unregister_selectable</strong>(fileno)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Unregisters a selectable object.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


687
688
689</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 687</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unregister_selectable'>unregister_selectable</span><span class='lparen'>(</span><span class='id identifier rubyid_fileno'>fileno</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@selectables</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_fileno'>fileno</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="work-instance_method">
  
    #<strong>work</strong>(timeout = -1))  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sends or receives any outstanding messages queued for a Messenger.</p>

<p>This will block for the indicated timeout.  This method may also do I/O
other than sending and receiving messages.  For example, closing
connections after stop() has been called.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


422
423
424
425
426
427
428
429
430</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/messenger/messenger.rb', line 422</span>

<span class='kw'>def</span> <span class='id identifier rubyid_work'>work</span><span class='lparen'>(</span><span class='id identifier rubyid_timeout'>timeout</span><span class='op'>=</span><span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_err'>err</span> <span class='op'>=</span> <span class='const'>Cproton</span><span class='period'>.</span><span class='id identifier rubyid_pn_messenger_work'>pn_messenger_work</span><span class='lparen'>(</span><span class='ivar'>@impl</span><span class='comma'>,</span> <span class='id identifier rubyid_timeout'>timeout</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_err'>err</span> <span class='op'>==</span> <span class='const'>Cproton</span><span class='op'>::</span><span class='const'>PN_TIMEOUT</span><span class='rparen'>)</span> <span class='kw'>then</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_check_for_error'>check_for_error</span><span class='lparen'>(</span><span class='id identifier rubyid_err'>err</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Dec  5 15:30:46 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.8 (ruby-2.4.2).
</div>

    </div>
  </body>
</html>